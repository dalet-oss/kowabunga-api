definitions:
  StorageNFS:
    type: object
    required: [name, endpoint]
    properties:
      id:
        type: string
        description: The NFS storage ID (auto-generated).
      name:
        type: string
        description: The NFS storage name.
      description:
        type: string
        description: The NFS storage description.
      endpoint:
        type: string
        description: The associated NFS endpoint FQDN.
      fs:
        type: string
        description: The underlying associated CephFS volume name.
        default: 'nfs'
      backends:
        type: array
        items:
          type: string
        description: List of NFS Ganesha API server IP addresses.
      port:
        type: integer
        description: NFS Ganesha API server port (default 54934).
        default: 54934

paths:
  /nfs:
    get:
      tags:
        - nfs
      operationId: GetAllNfsStorages
      description: Returns the IDs of registered NFS storages.
      responses:
        200:
          description: Returns the an array of NFS storage IDs.
          schema:
            type: array
            items:
              type: string

  /nfs/{nfsId}:
    get:
      tags:
        - nfs
      operationId: GetNfsStorage
      description: Returns a description of the NFS storage.
      parameters:
        - name: nfsId
          in: path
          type: string
          required: true
          description: The ID of the NFS storage to get.
      responses:
        200:
          description: Returns the NFS storage object.
          schema:
            $ref: '#/definitions/StorageNFS'
        404:
          description: Invalid NFS storage ID was provided.
    put:
      tags:
        - nfs
      operationId: UpdateNfsStorage
      description: Updates an NFS storage configuration.
      parameters:
        - name: nfsId
          in: path
          type: string
          required: true
          description: The ID of the NFS storage to get.
        - name: body
          in: body
          schema:
            $ref: '#/definitions/StorageNFS'
      responses:
        200:
          description: Returns the updated NFS storage object.
          schema:
            $ref: '#/definitions/StorageNFS'
        400:
          description: Bad parameters were provided.
        404:
          description: Invalid NFS storage ID was provided.
    delete:
      tags:
        - nfs
      operationId: DeleteNfsStorage
      description: Deletes an existing NFS storage.
      parameters:
        - name: nfsId
          in: path
          type: string
          required: true
          description: The ID of the NFS storage to get.
      responses:
        200:
          description: The NFS storage has been successfully removed.
        404:
          description: Invalid NFS storage ID was provided.
        409:
          description: The NFS storage is not empty or still being referenced.
        500:
          description: Unable to delete NFS storage.

  /nfs/{nfsId}/kfs:
    get:
      tags:
        - nfs
        - kfs
      operationId: GetNfsKfs
      description: Returns the IDs of the KFS volumes existing in the NFS storage.
      parameters:
        - name: nfsId
          in: path
          type: string
          required: true
          description: The ID of the NFS storage to query.
      responses:
        200:
          description: Returns an array of KFS storage volume IDs.
          schema:
            type: array
            items:
              type: string
        404:
          description: Invalid NFS storage ID was provided.
